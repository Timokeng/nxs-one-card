<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>学生管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../../layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../layuiadmin/style/dtree/dtree.css">
    <link rel="stylesheet" href="../../layuiadmin/style/dtree/font/dtreefont.css">
    <link rel="stylesheet" href="../../layuiadmin/style/admin.css">
    <link rel="stylesheet" href="../../layuiadmin/style/student.css">
    <link rel="stylesheet" href="../../layuiadmin/style/formBox.css">
    <link rel="stylesheet" href="../../layuiadmin/style/sideUpaload.css">
</head>

<body>

    <div class="main-article">
        <div class="left">
            <div class="header">机构选择</div>
            <div class="tree-box">
                <ul id="demoTree" class="dtree" data-id="0"></ul>
            </div>
        </div>
        <div class="right">
            <div class="func-box">
                <div class="header">操作</div>
                <div class="article">
                    <button id="searchBt" class="layui-btn"><i class="layui-icon layui-icon-search"></i>查找缴费记录</button>
                    <button onclick="exportLi()" class="layui-btn"><i
                            class="layui-icon layui-icon-export"></i>导出缴费记录</button>
                    <button onclick="sub.style.display = 'block'" class="layui-btn"><i
                            class="layui-icon layui-icon-cols"></i>打开下载列表</button>
                </div>
            </div>
            <div class="condition-box layui-anim layui-anim-scale" id="condition">
                <div class="header">
                    <div>筛选条件</div>
                    <div onclick="cdb.style.display = 'none'"><i class="layui-icon layui-icon-close"></i></div>
                </div>
                <div class="form-box layui-form" lay-filter="conditionForm">
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">校内ID</label>
                        <div class="layui-input-block">
                            <input type="text" name="id" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">姓名</label>
                        <div class="layui-input-block">
                            <input type="text" name="name" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">性别</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="man" title="男">
                            <input type="checkbox" name="woman" title="女">
                        </div>
                    </div>
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">身份证号</label>
                        <div class="layui-input-block">
                            <input type="text" name="pid" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">费用名称</label>
                        <div class="layui-input-block">
                            <input type="text" name="project" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">金额</label>
                        <div class="layui-input-block">
                            <input type="text" name="sum" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item input-box">
                        <label class="layui-form-label">日期</label>
                        <div class="layui-input-block">
                            <input id="date" type="text" name="date" placeholder="数据格式:xx-xx-xx" autocomplete="off"
                                class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="btn-box"><button class="layui-btn" onclick="searchLi()">确定</button></div>
            </div>
            <div class="table-box">
                <div class="header">缴费记录</div>
                <div class="article">
                    <table id="payment-list" lay-filter="test"></table>
                </div>
            </div>
        </div>
        <div class="side-upload" id="sideUpload">
            <div class="header">
                <div>下载列表</div>
                <div onclick="sub.style.display = 'none'"><i class="layui-icon layui-icon-close"></i></div>
            </div>
            <div class="article" id="uploadList"></div>
        </div>
    </div>

    <script src="../../layuiadmin/layui/layui.js"></script>
    <script>
        layui.config({
            base: '../../layuiadmin/' //静态资源所在路径
        }).extend({
            index: 'lib/index' //主入口模块
        }).use(['index', 'console']);


        // -------------------dtree相关-------------------
        var demoTree = [
            {
                id: "1",
                title: '一中',
                checkArr: "0",
                children: [
                    {
                        id: "11",
                        parentId: "1",
                        title: '高一',
                        checkArr: "0",
                    },
                    {
                        id: "12",
                        parentId: "1",
                        title: '高二',
                        checkArr: "0",
                    },
                    {
                        id: "13",
                        parentId: "1",
                        title: '高三',
                        checkArr: "0",
                    },
                ]
            },
            {
                id: '2',
                title: '二中',
                checkArr: "0",
                children: [
                    {
                        id: "21",
                        parentId: "2",
                        title: '高一',
                        checkArr: "0",
                    },
                    {
                        id: "22",
                        parentId: "2",
                        title: '高二',
                        checkArr: "0",
                    },
                    {
                        id: "23",
                        parentId: "2",
                        title: '高三',
                        checkArr: "0",
                    },
                ]
            },
            {
                id: '3',
                title: '三中',
                checkArr: "0",
                children: [
                    {
                        id: "31",
                        parentId: "3",
                        title: '高一',
                        checkArr: "0",
                    },
                    {
                        id: "32",
                        parentId: "3",
                        title: '高二',
                        checkArr: "0",
                    },
                    {
                        id: "33",
                        parentId: "3",
                        title: '高三',
                        checkArr: "0",
                    },
                ]
            },
        ]

        layui.extend({
            dtree: 'style/dtree/dtree'
        }).use(['dtree', 'layer', 'jquery'], function () {
            var dtree = layui.dtree, layer = layui.layer, $ = layui.jquery;
            // 初始化树
            var DemoTree = dtree.render({
                elem: "#demoTree",
                data: demoTree, // 使用data加载
                checkbar: true,
                checkbarType: "no-all",
                checkbarFun: {
                    chooseDone: function (checkbarNodesParam) {
                        classData = checkbarNodesParam;
                        console.log(classData)
                        return;
                    }
                },
            });

            // // 绑定节点点击
            // dtree.on("node('demoTree')", function (obj) {
            //   layer.msg(JSON.stringify(obj.param));
            // });
        });
        // ------------dtree相关（结束）--------------



        // ----------table组件相关------------------
        var tableDate = [
            { id: 1, name: "张三", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
            { id: 2, name: "李四", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
            { id: 3, name: "王五", pid: "530302199701236322", sex: "女", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
            { id: 4, name: "狗蛋", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
            { id: 5, name: "二妞", pid: "530302199701236322", sex: "女", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
            { id: 6, name: "小六", pid: "530302199701236322", sex: "女", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
            { id: 7, name: "来福", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
        ]
        //  初始化table
        layui.use(['table', 'layer', 'form'], function () {
            var table = layui.table;
            var layer = layui.layer;
            var form = layui.form;

            //第一个实例
            table.render({
                elem: '#payment-list'
                , id: 'idTest'
                , height: 475
                , data: tableDate
                , page: true //开启分页
                , cols: [[ //表头
                    //   { checkbox: true, width: "5%" }
                    { field: 'id', title: 'ID', width: "5%", minWidth: 60 }
                    , { field: 'name', title: '姓名', width: "7%", minWidth: 60 }
                    , { field: 'pid', title: '身份证号', width: "18%", minWidth: 200 }
                    , { field: 'sex', title: '性别', width: "7%", minWidth: 60 }
                    , { field: 'school', title: '学校', width: "12%", minWidth: 100 }
                    , { field: 'grade', title: '年级', width: "7%", minWidth: 100 }
                    , { field: 'class', title: '班级', width: "7%", minWidth: 100 }
                    , { field: 'project', title: '费用名称', width: "15%", minWidth: 200 }
                    , { field: 'sum', title: '金额', width: "10%", minWidth: 200 }
                    , { field: 'date', title: '日期', width: "12%", minWidth: 200 }
                ]]
            });
        });
        // ----------table组件相关（结束）------------------

        // --------------------日期与时间选择器------------------------
        layui.use('laydate', function () {
            var laydate = layui.laydate;

            laydate.render({
                elem: '#date', //指定元素
                type: 'date',
                min: 0,
            });
        });
        // --------------------日期与时间选择器（结束）------------------------


        // --------------------部分独立方法-----------------------
        //  刷新table
        function reloadTable() {
            layui.use('table', function () {
                var table = layui.table;

                var tableDate2 = [
                    { id: 1, name: "张三", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
                    { id: 2, name: "李四", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
                    { id: 3, name: "王五", pid: "530302199701236322", sex: "女", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
                    { id: 4, name: "狗蛋", pid: "530302199701236322", sex: "男", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
                    { id: 5, name: "二妞", pid: "530302199701236322", sex: "女", school: "一中", grade: "高一", class: "一班", project: "高三上学期学费", sum: 1000, date: '2021-7-1' },
                ]

                table.render({
                    elem: '#payment-list'
                    , id: 'idTest'
                    , height: 475
                    , data: tableDate2
                    , page: true //开启分页
                    , cols: [[ //表头
                        { field: 'id', title: 'ID', width: "5%", minWidth: 60 }
                        , { field: 'name', title: '姓名', width: "7%", minWidth: 60 }
                        , { field: 'pid', title: '身份证号', width: "18%", minWidth: 200 }
                        , { field: 'sex', title: '性别', width: "7%", minWidth: 60 }
                        , { field: 'school', title: '学校', width: "12%", minWidth: 100 }
                        , { field: 'grade', title: '年级', width: "7%", minWidth: 100 }
                        , { field: 'class', title: '班级', width: "7%", minWidth: 100 }
                        , { field: 'project', title: '费用名称', width: "15%", minWidth: 200 }
                        , { field: 'sum', title: '金额', width: "10%", minWidth: 200 }
                        , { field: 'date', title: '日期', width: "12%", minWidth: 200 }
                    ]]
                });
            })
        }
    // --------------------部分独立方法（结束）-----------------------
    </script>
    <script src="../../layuiadmin/modules/search.js"></script>
    <script src="../../layuiadmin/modules/exportInfo.js"></script>
</body>

</html>